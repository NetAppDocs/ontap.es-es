---
permalink: data-protection/snapmirror-synchronous-disaster-recovery-basics-concept.html 
sidebar: sidebar 
keywords: snapmirror, synchronous, disaster, recovery 
summary: 'A partir de ONTAP 9.5, la tecnología SnapMirror síncrono (SM-S) es compatible con todas las plataformas FAS y AFF que tengan al menos 16 GB de memoria y en todas las plataformas ONTAP Select. La tecnología SnapMirror Synchronous es una función con licencia por nodo que proporciona replicación de datos síncrona a nivel de volumen.' 
---
= Conceptos básicos de la recuperación ante desastres de SnapMirror Synchronous
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
A partir de ONTAP 9.5, la tecnología SnapMirror síncrono (SM-S) es compatible con todas las plataformas FAS y AFF que tengan al menos 16 GB de memoria y en todas las plataformas ONTAP Select. La tecnología SnapMirror Synchronous es una función con licencia por nodo que proporciona replicación de datos síncrona a nivel de volumen.

Esta funcionalidad aborda las normativas regulatorias y nacionales para la replicación síncrona en sectores financieros, sanitarios y otros regulados, en los que no es necesaria una pérdida de datos nula.



== Operaciones síncronas de SnapMirror permitidas

El límite del número de operaciones de replicación síncrona de SnapMirror por par de alta disponibilidad depende del modelo de controladora.

En la siguiente tabla, se enumera el número de operaciones de SnapMirror Synchronous que se permiten por par de alta disponibilidad en función del tipo de plataforma y la versión ONTAP.

|===


| Plataforma | Versiones anteriores a ONTAP 9.9.1 | ONTAP 9.9.1 | ONTAP 9.10.1 | ONTAP 9.11.1 a ONTAP 9.14.1 


 a| 
AFF
 a| 
80
 a| 
160
 a| 
200
 a| 
400



 a| 
ASA
 a| 
80
 a| 
160
 a| 
200
 a| 
400



 a| 
FAS
 a| 
40
 a| 
80
 a| 
80
 a| 
80



 a| 
ONTAP Select
 a| 
20
 a| 
40
 a| 
40
 a| 
40

|===


== Funciones admitidas

La siguiente tabla indica las funciones compatibles con SnapMirror Synchronous y las versiones de ONTAP que admiten.

[cols="3,1,4"]
|===


| Función | Se admite la primera versión | Información adicional 


| Antivirus en el volumen primario de la relación de SnapMirror síncrono | ONTAP 9,6 |  


| Replicación de copia Snapshot creada por la aplicación | ONTAP 9,7 | Si una copia Snapshot se etiqueta con la etiqueta correspondiente en el momento de la `snapshot create` Funcionamiento, mediante la interfaz de línea de comandos o la API de ONTAP, SnapMirror Synchronous replica las copias Snapshot, tanto las creadas por el usuario como las creadas con scripts externos, tras desactivar las aplicaciones. Las copias Snapshot programadas creadas con una política de Snapshot no se replican. Para obtener más información sobre la replicación de copias Snapshot creadas por la aplicación, consulte el artículo de la base de conocimientos: link:https://kb.netapp.com/Advice_and_Troubleshooting/Data_Protection_and_Security/SnapMirror/How_to_replicate_application_created_snapshots_with_SnapMirror_Synchronous["Cómo replicar las copias Snapshot de aplicación creadas con SnapMirror Synchronous"^]. 


| Clonar eliminación automática | ONTAP 9,6 |  


| Los agregados de FabricPool con política de organización en niveles de Ninguna, Snapshot o Automática son compatibles con el origen y el destino de SnapMirror síncrono. | ONTAP 9,5 | El volumen de destino de un agregado de FabricPool no se puede establecer en la política de organización en niveles All. 


| FC | ONTAP 9,5 | En todas las redes para las que la latencia no supere los 10ms ms 


| FC-NVMe | ONTAP 9,7 |  


| Clones de archivo | ONTAP 9,7 |  


| FPolicy en el volumen primario de la relación de SnapMirror síncrono | ONTAP 9,6 |  


| Cuotas duras y flexibles en el volumen principal de la relación síncrona de SnapMirror | ONTAP 9,6 | Las reglas de cuota no se replican en el destino; por lo tanto, la base de datos de cuotas no se replica en el destino. 


| Relaciones síncronas dentro del clúster | ONTAP 9.13.1P6 | Los volúmenes de origen y destino deben estar en SVM diferentes.
La alta disponibilidad se proporciona cuando los volúmenes de origen y de destino se encuentran en diferentes pares de alta disponibilidad.
Si se desactiva todo el clúster, no será posible el acceso a los volúmenes hasta que se recupere el clúster.
Las relaciones síncronas de SnapMirror dentro del clúster contribuirán al límite general de datos simultáneos xref:SnapMirror Synchronous operations allowed[Relaciones por pareja de alta disponibilidad]. 


| ISCSI | ONTAP 9,5 |  


| Clones LUN y clones de espacio de nombres NVMe | ONTAP 9,7 |  


| Clones LUN respaldados por copias Snapshot creadas por la aplicación | ONTAP 9,7 |  


| Acceso de protocolo mixto (NFS v3 y SMB) | ONTAP 9,6 |  


| Restauración de NDMP/NDMP | ONTAP 9.13.1 | El clúster de origen y de destino deben ejecutar ONTAP 9.13.1 o versiones posteriores para usar NDMP con SnapMirror síncrono. Para obtener más información, consulte xref:../tape-backup/transfer-data-ndmpcopy-task.html[Transferencia de datos mediante la copia ndmp]. 


| Operaciones síncronas de SnapMirror (NDO) sin interrupciones en plataformas AFF/ASA, solo. | ONTAP 9.12.1 | La compatibilidad con operaciones no disruptivas le permite realizar muchas tareas de mantenimiento comunes sin necesidad de programar un tiempo de inactividad. Las operaciones admitidas incluyen la toma de control y el retorno al nodo primario, y el movimiento de volúmenes, siempre y cuando haya un solo nodo superviviente entre cada uno de los dos clústeres. 


| NFS v4,2 | ONTAP 9.10.1 |  


| NFS v4,3 | ONTAP 9,5 |  


| NFS v4,0 | ONTAP 9,6 |  


| NFS v4,1 | ONTAP 9,6 |  


| NVMe/TCP | 9.10.1 |  


| Eliminación de una limitación elevada de la frecuencia de funcionamiento de metadatos | ONTAP 9,6 |  


| Seguridad para datos confidenciales en tránsito con cifrado TLS 1.2 | ONTAP 9,6 |  


| Restauración parcial de archivos y archivos individuales | ONTAP 9.13.1 |  


| SMB 2,0 o posterior | ONTAP 9,6 |  


| Cascada de reflejo-reflejo síncrono de SnapMirror | ONTAP 9,6 | La relación del volumen de destino de la relación de SnapMirror síncrono debe ser una relación de SnapMirror asíncrono. 


| Recuperación ante desastres de SVM | ONTAP 9,6 | * Un origen de SnapMirror Synchronous también puede ser un origen de recuperación ante desastres de SVM, por ejemplo, una configuración ramificada con SnapMirror Synchronous como un tramo y recuperación ante desastres de SVM como el otro.

* Un origen de SnapMirror Synchronous no puede ser un destino de recuperación ante desastres de SVM porque SnapMirror Synchronous no admite la configuración en cascada de un origen de protección de datos.
Debe liberar la relación síncrona antes de ejecutar un cambio de sincronización de recuperación ante desastres de SVM en el clúster de destino.

* Un destino de SnapMirror síncrono no puede ser un origen de recuperación ante desastres de SVM porque la recuperación ante desastres de SVM no admite la replicación de volúmenes de DP.
Una resincronización flip del origen síncrono provocaría la recuperación ante desastres de SVM excepto el volumen DP en el clúster de destino. 


| Restauración basada en cinta al volumen de origen | ONTAP 9.13.1 |  


| Paridad de marca de hora entre los volúmenes de origen y destino para NAS | ONTAP 9,6 | Si se actualizó de ONTAP 9,5 a ONTAP 9,6, la marca de tiempo se replica solo para todos los archivos nuevos y modificados en el volumen de origen. La Marca de hora de los archivos existentes en el volumen de origen no está sincronizada. 
|===


== Funciones no admitidas

Las siguientes funciones no se admiten con las relaciones de SnapMirror síncrono:

* Grupos de consistencia
* Sistemas DPO optimizados para DP
* Volúmenes de FlexGroup
* Volúmenes de FlexCache
* Limitación global
* En una configuración de dispersión, solo una relación puede ser una relación de SnapMirror síncrono; todas las demás relaciones del volumen de origen deben ser relaciones de SnapMirror asíncronas.
* Movimiento de LUN
* Configuraciones de MetroCluster
* Acceso SAN y NVMe mixto
El mismo volumen o SVM no admiten espacios de nombres LUN y NVMe.
* SnapCenter
* Volúmenes de SnapLock
* Copias Snapshot a prueba de manipulaciones
* Backup a cinta o restauración con volcado y SMTape en el volumen de destino
* Piso de rendimiento (QoS mín.) para volúmenes de origen
* SnapRestore de volumen
* VVol




== Modos de funcionamiento

SnapMirror Synchronous tiene dos modos de funcionamiento basados en el tipo de política de SnapMirror utilizada:

* *Modo de sincronización*
En el modo de sincronización, las operaciones de I/O de la aplicación se envían en paralelo al primario y el secundario
sistemas de almacenamiento. Si la escritura en el almacenamiento secundario no se realiza por ningún motivo, se permite que la aplicación continúe escribiendo en el almacenamiento principal. Una vez corregida la condición de error, la tecnología SnapMirror Synchronous vuelve a sincronizar automáticamente con el almacenamiento secundario y reanuda la replicación del almacenamiento principal al almacenamiento secundario en modo síncrono.
En el modo síncrono, RPO=0 y RTO son muy bajos hasta que se produce un fallo de replicación secundaria en el momento en el que el objetivo de punto de recuperación y el objetivo de tiempo de recuperación se vuelven indeterminados, pero igual que el tiempo para reparar el problema que provocó un error en la replicación secundaria y para finalizar la resincronización.
* *Modo StrictSync*
SnapMirror Synchronous puede funcionar opcionalmente en el modo StrictSync. Si la escritura en el almacenamiento secundario no se completa por ningún motivo, las operaciones de I/o de la aplicación fallan y, por lo tanto, se garantiza que el almacenamiento primario y secundario sean idénticos. Las operaciones de I/o de la aplicación en el principal se reanudan solo una vez que la relación de SnapMirror se devuelve a la `InSync` estado. Si falla el almacenamiento primario, se pueden reanudar las operaciones de I/o de la aplicación en el almacenamiento secundario después de la conmutación por error, sin pérdida de datos.
En el modo StrictSync, el objetivo de punto de recuperación es siempre cero y el objetivo de tiempo de recuperación es muy bajo.




== Estado de la relación

El estado de una relación de SnapMirror Synchronous siempre está en la `InSync` estado durante el funcionamiento normal. Si por algún motivo la transferencia de SnapMirror falla, el destino no está sincronizado con el origen y puede ir a la `OutofSync` estado.

Para las relaciones de SnapMirror Synchronous, el sistema comprueba automáticamente el estado de la relación  `InSync` o. `OutofSync`) a un intervalo fijo. Si el estado de la relación es `OutofSync`, ONTAP activa automáticamente el proceso de resincronización automática para devolver la relación al `InSync` estado. La resincronización automática se activa solo si la transferencia falla debido a alguna operación, como la conmutación por error no planificada del almacenamiento en el origen o en el destino, o una interrupción del servicio de red. Operaciones iniciadas por el usuario como, por ejemplo `snapmirror quiesce` y.. `snapmirror break` no active la resincronización automática.

Si el estado de la relación es `OutofSync` Para una relación de SnapMirror Synchronous en el modo StrictSync, se detienen todas las operaciones de I/o del volumen primario. La `OutofSync` el estado de la relación SnapMirror Synchronous en el modo Sync no genera interrupciones en el volumen primario, y se permiten las operaciones de I/o en el volumen primario.

.Información relacionada
http://www.netapp.com/us/media/tr-4733.pdf["Informe técnico de NetApp 4733: Prácticas recomendadas y configuración de SnapMirror síncrono"^]
