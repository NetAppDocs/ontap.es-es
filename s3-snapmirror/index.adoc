---
sidebar: sidebar 
permalink: s3-snapmirror/index.html 
keywords: s3 snapmirror buckets, snapmirror buckets SVM, s3 snapmirror data protection, hybrid cloud bundle, s3 snapmirror relationship, VM peering, cluster and storage VM peering, Fan-in deployments, data protection, s3 snapmirror policy, peering 
summary: A partir de ONTAP 9.10.1, puede proteger bloques en almacenes de objetos de ONTAP S3 mediante las funciones de mirroring y backup de SnapMirror ya conocidas. 
---
= Información general de SnapMirror de S3
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
A partir de ONTAP 9.10.1, puede proteger buckets en almacenes de objetos de ONTAP S3 mediante mirroring de SnapMirror y funcionalidad de backup. A diferencia de SnapMirror estándar, SnapMirror de S3 permite el mirroring y los backups en destinos que no sean de NetApp, como AWS S3.

SnapMirror de S3 admite reflejos activos y niveles de backup desde bloques de ONTAP S3 en los siguientes destinos:

[cols="50,25,25"]
|===
| Destino | ¿Admite los reflejos activos y la toma de control? | ¿Compatible con backup y restauración? 


 a| 
ONTAP S3

* Bloques en la misma SVM
* Los bloques de diferentes SVM en el mismo clúster
* Bloques en SVM en clústeres diferentes

| image:status-enabled-perf-config.gif["marca de verificación"] | image:status-enabled-perf-config.gif["marca de verificación"] 


| StorageGRID |  | image:status-enabled-perf-config.gif["marca de verificación"] 


| AWS S3 |  | image:status-enabled-perf-config.gif["marca de verificación"] 


| Cloud Volumes ONTAP para Azure | image:status-enabled-perf-config.gif["marca de verificación"] | image:status-enabled-perf-config.gif["marca de verificación"] 


| Cloud Volumes ONTAP para AWS | image:status-enabled-perf-config.gif["marca de verificación"] | image:status-enabled-perf-config.gif["marca de verificación"] 


| Cloud Volumes ONTAP para Google Cloud | image:status-enabled-perf-config.gif["marca de verificación"] | image:status-enabled-perf-config.gif["marca de verificación"] 
|===
Puede proteger bloques existentes en servidores ONTAP S3 o puede crear nuevos bloques con protección de datos habilitada de inmediato.



== Requisitos de SnapMirror de S3

* Versión de ONTAP
ONTAP 9.10.1 o una versión posterior debe ejecutarse en clústeres de origen y de destino.
* Licencia
Los siguientes paquetes de licencia se requieren en los sistemas de origen y de destino de ONTAP:
+
** Paquete básico
Para el protocolo y el almacenamiento ONTAP S3.
** Bundle de protección de datos
Para SnapMirror de S3 para dirigirse a otros destinos de almacenes de objetos de NetApp (ONTAP S3, StorageGRID y Cloud Volumes ONTAP).
** Bundle de protección de datos y de cloud híbrido
Para S3 SnapMirror para apuntar a almacenes de objetos de terceros, incluido AWS S3.


* ONTAP S3
+
** Los servidores ONTAP S3 deben ejecutar SVM de origen y de destino.
** Se recomienda, pero no es obligatorio, que los certificados de CA para el acceso TLS estén instalados en sistemas que alojan servidores S3.
+
*** Los certificados de CA utilizados para firmar los certificados de los servidores S3 deben instalarse en la máquina virtual de almacenamiento de administración de los clústeres que alojan servidores S3.
*** Es posible usar un certificado de CA autofirmado o un certificado firmado por un proveedor de CA externo.
*** Si las máquinas virtuales de almacenamiento de origen o de destino no escuchan con HTTPS, no es necesario instalar certificados de CA.




* Relaciones entre iguales (para destinos de ONTAP S3)
+
** Las LIF de interconexión de clústeres deben configurarse (para destinos de ONTAP remotos).
** Los clústeres de origen y destino tienen una relación entre iguales (para destinos de ONTAP remotos).
** Las máquinas virtuales de almacenamiento de origen y de destino tienen una relación entre iguales (para todos los destinos ONTAP).


* Política de SnapMirror
+
** Se requiere una política de SnapMirror específica para S3 en todas las relaciones de SnapMirror S3, pero se puede usar la misma política para varias relaciones.
** Puede crear su propia directiva o aceptar la predeterminada *continua*, que incluye los siguientes valores:
+
*** Acelerador (límite superior de rendimiento/ancho de banda): Ilimitado.
*** Tiempo objetivo de punto de recuperación: 1 hora (3600 segundos).







NOTE: Debe tener en cuenta que, cuando hay dos buckets S3 en una relación de SnapMirror, si hay políticas de ciclo de vida configuradas de forma que la versión actual de un objeto caduque (se elimina), se replica la misma acción en el bloque del partner. Esto es así incluso si el bloque de partners es de solo lectura o pasivo.

* Claves de usuario raíz
Se requieren claves de acceso del usuario raíz de Storage VM para las relaciones de SnapMirror de S3; ONTAP no las asigna de forma predeterminada. La primera vez que crea una relación SnapMirror de S3, debe comprobar que las claves existen tanto en los equipos virtuales de almacenamiento de origen como de destino, y volver a regenerarlas si no lo hacen. Si necesita volver a regenerarlos, debe asegurarse de que todos los clientes y todas las configuraciones del almacén de objetos de SnapMirror que utilicen el par de claves secreta y de acceso se actualicen con las nuevas claves.


Para obtener información sobre la configuración del servidor S3, consulte los temas siguientes:

* link:../task_object_provision_enable_s3_server.html["Habilite un servidor S3 en una máquina virtual de almacenamiento"]
* link:../s3-config/index.html["Acerca del proceso de configuración de S3"]


Para obtener información acerca de la relación entre iguales de clústeres y máquinas virtuales de almacenamiento, consulte el tema siguiente:

* link:../task_dp_prepare_mirror.html["Preparación del mirroring y el almacenamiento (System Manager, pasos 1 a 6)"]
* link:../peering/index.html["Relaciones entre iguales de clústeres y SVM (CLI)"]




== Relaciones de SnapMirror admitidas

SnapMirror de S3 admite relaciones de distribución ramificada y en cascada. Para ver información general, consulte link:../data-protection/supported-deployment-config-concept.html["Puestas en marcha de protección de datos en cascada y distribución ramificada"].

S3 SnapMirror no admite puestas en marcha ramificadas (relaciones de protección de datos entre varios bloques de origen y un único bloque de destino). SnapMirror de S3 puede admitir varios duplicados de bloques de varios clústeres en un único clúster secundario, pero cada bloque de origen debe tener su propio bloque de destino en el clúster secundario.



== Controle el acceso a S3 cucharones

Cuando se crean bloques nuevos, se puede controlar el acceso mediante la creación de usuarios y grupos. Para obtener más información, consulte los siguientes temas:

* link:../task_object_provision_add_s3_users_groups.html["Añadir usuarios y grupos de S3 (System Manager)"]
* link:../s3-config/create-s3-user-task.html["Crear un usuario de S3 (CLI)"]
* link:../s3-config/create-modify-groups-task.html["Crear o modificar grupos S3 (CLI)"]

