---
permalink: upgrade/concept_mixed_version_requirements.html 
sidebar: sidebar 
keywords: ontap, upgrade, mixed, version, clusters, mixed-version nodes, requirements 
summary: Un clúster de ONTAP de versión mixta consta de nodos que ejecutan dos versiones principales de ONTAP diferentes, como ONTAP 9,8 y 9.12.1. Los clústeres de ONTAP de versiones mixtas solo son compatibles con NetApp en situaciones específicas. 
---
= Clústeres de ONTAP de versión mixta
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Un clúster de ONTAP de versión mixta consta de nodos que ejecutan dos versiones principales de ONTAP diferentes, como ONTAP 9,8 y 9.12.1, o ONTAP 9.9.1 y 9.13.1. Los clústeres de ONTAP de versiones mixtas solo son compatibles con NetApp en situaciones específicas.

Los dos escenarios más comunes son:

* Actualizaciones del software ONTAP en grandes clústeres
* Es necesario actualizar el software ONTAP cuando piensa añadir nuevas controladoras a un clúster


Este contenido se aplica a las versiones de ONTAP que admiten sistemas de plataformas NetApp, como sistemas AFF, ASA, FAS y serie C.  La información aquí no se aplica a las versiones de cloud de ONTAP (9.x.0) como 9.12.0.



== Requisitos para clústeres de ONTAP de versión mixta

En cualquier situación en la que su clúster deba introducir un estado mixto de ONTAP, debe conocer los requisitos y restricciones importantes.

* No puede haber más de dos versiones principales de ONTAP diferentes en un clúster en un momento dado. Los clústeres que tienen nodos en ejecución con niveles de revisión P o D diferentes de la misma versión de ONTAP, como ONTAP 9,9.1P1 y 9,9.1P5, no se consideran clústeres de ONTAP de versiones mixtas.
* Mientras el clúster está en un estado de versión mixta, no debe introducir ningún comando que modifique la operación o la configuración del clúster excepto si es necesario para satisfacer los requisitos de actualización. Para facilitar las actividades de actualización de controladoras, se admiten operaciones de movimiento de volúmenes mientras se encuentran en un clúster de ONTAP de versión mixta.
* Para un funcionamiento óptimo del clúster, la cantidad de tiempo que el clúster tenga el estado de versión mixta debe ser lo más breve posible.  La cantidad máxima de tiempo que puede permanecer un clúster en una versión mixta depende de la versión de ONTAP más baja del clúster.
+
[cols="2*"]
|===
| Si la versión más baja de ONTAP que se ejecuta en el clúster de versiones mixtas es: | A continuación, puede permanecer en un estado de versión mixta durante un máximo de 


| ONTAP 9,8 o superior | 90 días 


| ONTAP 9,7 o inferior | 7 días 
|===
* A partir de ONTAP 9,8, un clúster de ONTAP de versión mixta puede abarcar un máximo de 4 versiones principales. Por ejemplo, un clúster ONTAP de versión mixta podría tener nodos que ejecuten ONTAP 9,8 y 9.12.1, o bien podría tener nodos que ejecuten ONTAP 9.9.1 y 9.13.1. Sin embargo, no se admitiría un clúster de ONTAP de versión mixta con nodos que ejecuten ONTAP 9,8 y 9.13.1, porque un clúster de versión mixta abarca 5 versiones principales.




== Actualización de la versión de ONTAP de un clúster de gran tamaño

Cada versión de ONTAP ofrece un conjunto de funciones más sólido. Cuando necesite actualizar la versión de ONTAP de un clúster más grande para llegar a una versión más reciente de ONTAP, deberá introducir un estado de clústeres de versiones mixtas durante un período de tiempo al actualizar cada nodo del clúster.



== Añadir nodos nuevos al clúster

Es posible añadir nodos nuevos a su clúster para expandir su capacidad, o bien porque está sustituyendo por completo sus controladoras. En cualquier caso, debe habilitar la migración de sus datos desde las controladoras antiguas al nuevo sistema.

Si piensa añadir nodos nuevos al clúster y esos nodos requieren una versión de ONTAP que sea posterior a la de los nodos existentes del clúster, tendrá que actualizar primero todos los nodos existentes del clúster a la versión de ONTAP posterior y, a continuación, añadir los nodos nuevos. Sin embargo, si esto no es posible porque algunos de sus nodos existentes no son compatibles con la versión posterior de ONTAP, deberá introducir un estado de versión mixta durante una cantidad limitada de tiempo como parte del proceso de actualización.
Si tiene nodos que no admiten la versión de ONTAP más baja requerida por las controladoras nuevas, debe hacer lo siguiente:

. link:https://docs.netapp.com/us-en/ontap/upgrade/concept_upgrade_methods.html["Renovar"] Los nodos del clúster que sí admiten la versión ONTAP de las nuevas controladoras.
. Añada los nodos nuevos al clúster.
+
Use el comando ONTAP cluster add-node -allow-mixed-version-join en el nivel de privilegio avanzado para unirse a los nodos nuevos.

. Migre los datos desde cualquier nodo que no se pueda actualizar a un nodo que ejecuta la versión superior de ONTAP.
. link:https://docs.netapp.com/us-en/ontap/system-admin/remov-nodes-cluster-concept.html["Quite los nodos no compatibles del clúster"^].
+
Utilice el comando de ONTAP cluster remove-node -skip-last-low-version-node-check para quitar estos nodos. (En ONTAP 9,3 y versiones anteriores, utilice el comando cluster unjoin -skip-last-low-version-node-check).



Para obtener más información sobre la migración de datos, consulte:

* link:https://docs.netapp.com/us-en/ontap-systems-upgrade/upgrade/upgrade-create-aggregate-move-volumes.html["Cree un agregado y mueva volúmenes a los nuevos nodos"^]
* link:https://docs.netapp.com/us-en/ontap-metrocluster/transition/task_move_linux_iscsi_hosts_from_mcc_fc_to_mcc_ip_nodes.html#setting-up-new-iscsi-connections["Configuración de nuevas conexiones iSCSI para movimientos de volúmenes SAN"^]
* link:https://docs.netapp.com/us-en/ontap/encryption-at-rest/encrypt-existing-volume-task.html["Movimiento de volúmenes con cifrado"^]

