---
sidebar: sidebar 
permalink: task_san_configure_protection_for_business_continuity.html 
keywords: SM-BC, snapmirror business continuity, consistency group, remote protection, 9.8, 9.9.1, destination 
summary: Configurar la protección para la continuidad empresarial implica seleccionar LUN en el clúster de origen de ONTAP y añadirlas a un grupo de consistencia. 
---
= Protección con SnapMirror Business Continuity
:hardbreaks:
:toclevels: 1
:allow-uri-read: 
:toclevels: 1
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
La configuración de la protección mediante SnapMirror Business Continuity implica seleccionar las LUN en el clúster de origen de ONTAP y añadirlas a un grupo de consistencia.

.Antes de empezar
* Debe tener una licencia de SnapMirror Synchronous.
* Debe ser un administrador de clústeres o máquinas virtuales de almacenamiento.
* Todos los volúmenes constituyentes de un grupo de coherencia deben estar en una única máquina virtual de almacenamiento (SVM).
+
** Los LUN pueden residir en distintos volúmenes.


* Los clústeres de origen y destino no pueden ser los mismos.
* No es posible establecer relaciones de grupos de consistencia SM-BC entre clústeres de ASA y clústeres no-ASA.
* El espacio IP predeterminado es necesario por SM-BC para las relaciones de paridad de clústeres. No se admite el espacio IP personalizado.
* El nombre del grupo de coherencia debe ser único.
* Los volúmenes en el clúster secundario (de destino) deben ser del tipo DP.
* Las SVM principales y secundarias deben estar en una relación entre iguales.


.Pasos
Puede configurar un grupo de coherencia con la CLI de ONTAP o System Manager.

A partir de ONTAP 9.10.1, ONTAP ofrece un extremo y un menú de grupo de consistencia en System Manager, y ofrece utilidades de gestión adicionales. Si utiliza ONTAP 9.10.1 o posterior, consulte link:./consistency-groups/configure-task.html["Configurar un grupo de consistencia"] a continuación link:./consistency-groups/protect-task.html["configure la protección"] Para crear una relación SM-BC.

[role="tabbed-block"]
====
.System Manager
--
. En el clúster principal, navegue hasta *Protección > Descripción general > Proteger para continuidad empresarial > Proteger LUN*.
. Seleccione las LUN que desea proteger y añádalas a un grupo de protección.
. Seleccione el clúster y la SVM de destino.
. *La opción inicializar relación* está seleccionada de forma predeterminada. Haga clic en *Guardar* para comenzar la protección.
. Vaya a *Consola > rendimiento* para verificar la actividad de IOPS de las LUN.
. En el clúster de destino, utilice System Manager para comprobar que la protección de la relación de continuidad de negocio está sincronizada: *Protección > Relaciones*.


--
.CLI
--
. Cree una relación de grupo de coherencia a partir del clúster de destino.
`destination::> snapmirror create -source-path _source-path_ -destination-path _destination-path_ -cg-item-maps _volume-paths_ -policy _policy-name_
+
Puede asignar hasta 12 volúmenes constituyentes mediante el `cg-item-mappings` parámetro en la `snapmirror create` comando.

+
El siguiente ejemplo crea dos grupos de consistencia: `cg_src_ on the source with `vol1` y.. `vol2` y un grupo de consistencia de destino de mirroring, `cg_dst`.

+
`destination::> snapmirror create -source-path vs1_src:/cg/cg_src -destination-path vs1_dst:/cg/cg_dst -cg-item-mappings vol_src1:@vol_dst1,vol_src2:@vol_dst2 -policy AutomatedFailOver`

. Desde el clúster de destino, inicialice el grupo de coherencia.
+
`destination::>snapmirror initialize -destination-path _destination-consistency-group_`

. Confirme que la operación de inicialización se ha realizado correctamente. El estado debe ser `InSync`.
+
`snapmirror show`

. En cada clúster, cree un igroup para poder asignar las LUN al iniciador en el host de la aplicación.
`lun igroup create -igroup _name_ -protocol _fcp|iscsi_ -ostype _os_ -initiator _initiator_name_`
. En cada clúster, asigne las LUN al igroup:
+
`lun map -path _path_name_ -igroup _igroup_name_`

. Compruebe que la asignación de LUN se ha completado correctamente con el `lun map` comando. Luego, puede detectar las nuevas LUN en el host de la aplicación.


--
====